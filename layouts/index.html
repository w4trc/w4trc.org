{{ define "main" }}


  <!-- HERO -->
  <section class="hero-heroimg relative w-full bg-cover bg-center"
    style="background-image:linear-gradient(rgba(4,12,18,.35),rgba(4,12,18,.65)),url('/images/hero-mountains.jpg')">
    <div class="w-full max-w-[1400px] mx-auto px-6 py-10">
      <div class="flex justify-center mb-6">
        <img src="/images/w4trc-logo.png" alt="W4TRC" class="hero-logo-big">
      </div>


      <h1>Welcome to Kingsport Amateur Radio Club</h1>
      <p>
        ARRL-affiliated amateur radio club serving the Tri-Cities (Kingsport • Johnson City • Bristol).
        Public service, education, emergency comms, and plenty of fun on the air.
      </p>


      <div class="hero-ctas">
        <a class="cta-big cta-primary" href="/join/">Join / Renew</a>
        <a class="cta-big cta-outline" href="/license/">Get Licensed</a>
      </div>

    </div>
  </section>

  <!-- NEXT MEETING -->
  <section>
    <div class="max-w-[1400px] mx-auto px-6">
      <h2 class="section-title">Next Meeting</h2>
      <div class="meeting-box mt-6">
        <p id="meeting-title" class="text-xl font-semibold text-white">TBD</p>
        <p id="next-meeting-date" class="text-white/80">Loading…</p>

        <p class="mt-1 text-white/90">
          <strong>Location:</strong> <span id="meeting-location">TBD</span>
        </p>

        <p id="meeting-topic" class="text-white/80 hidden"></p>
        <p id="meeting-desc" class="text-white/80 hidden mt-1"></p>

        <div class="flex flex-wrap gap-3 mt-4" id="meeting-ctas">
          <!-- signup button injected here if provided -->
          <a class="px-4 py-2 rounded-xl border border-white/20 text-white/90" href="/calendar/">View Calendar</a>
          <a class="px-4 py-2 rounded-xl border border-white/20 text-white/90" href="/about/">About W4TRC</a>
        </div>
      </div>
    </div>
  </section>

  <script>console.log('MEETINGS JSON →', window.W4TRC_MEETINGS);</script>

<!-- Pass meeting data to JS with robust fallbacks -->
{{/* Build $m by checking multiple locations; always end with a valid object */}}
{{- $m := dict -}}
{{- with site.Data.meetings -}}           {{ $m = . }} {{- end -}}
{{- with (index site.Data "en") -}}
  {{- with .meetings -}}                  {{ $m = . }} {{- end -}}
{{- end -}}
{{- with (index site.Data "english") -}}
  {{- with .meetings -}}                  {{ $m = . }} {{- end -}}
{{- end -}}

<script>
  window.W4TRC_MEETINGS = {{ $m | jsonify }};
  console.log("MEETINGS JSON →", window.W4TRC_MEETINGS);
</script>
<script defer src="{{ (printf "js/next-meeting.js?v=%d" now.Unix) | relURL }}"></script>



  <!-- pass Hugo data to JS -->






  <!-- QUICK LINKS -->
  <section>
    <div class="max-w-[1400px] mx-auto px-6">
      <h2 class="section-title">Quick Links</h2>
      <div class="grid gap-6 md:grid-cols-2 xl:grid-cols-4 mt-6">
        <a class="quicklink-card" href="/repeaters/">
          <p class="text-lg font-semibold text-white">Club Repeaters</p>
          <p>Frequencies, tones, coverage notes.</p>
        </a>
        <a class="quicklink-card" href="/nets/">
          <p class="text-lg font-semibold text-white">Weekly Nets</p>
          <p>Schedules and scripts.</p>
        </a>
        <a class="quicklink-card" href="/license/">
          <p class="text-lg font-semibold text-white">Get Licensed / Upgrade</p>
          <p>Study materials and test sessions.</p>
        </a>
        <a class="quicklink-card" href="/projects/">
          <p class="text-lg font-semibold text-white">Projects</p>
          <p>Club builds, antennas, mesh.</p>
        </a>
      </div>
    </div>
  </section>

  <!-- NEWS -->
  <section>
    <div class="max-w-[1400px] mx-auto px-6">
      <h2 class="section-title">Latest News</h2>
      <div class="grid gap-6 md:grid-cols-2 xl:grid-cols-3 mt-6">
        {{ range first 3 (where site.RegularPages "Section" "in" (slice "news" "blog")) }}
          <a href="{{ .RelPermalink }}" class="news-card group">
            {{ with .Params.cover }}
              <img src="{{ . | relURL }}" alt="" class="mb-3">
            {{ end }}
            <div class="text-sm text-white/60 mb-1">{{ .Date.Format "Jan 2, 2006" }}</div>
            <h3>{{ .Title }}</h3>
            <p>{{ .Summary | plainify }}</p>
          </a>
        {{ end }}
      </div>
    </div>
  </section>

{{ end }}
